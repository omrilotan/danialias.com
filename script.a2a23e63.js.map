{"version":3,"sources":["script.js"],"names":["start","nodes","error","document","createElement","amend","waiting","success","contactme","className","appendChild","createTextNode","onsubmit","event","preventDefault","parentNode","removeChild","replaceChild","data","form","reduce","call","accumulator","item","value","name","trim","contact","insertBefore","date","Date","toUTCString","fetch","action","queryfy","Object","keys","entries","key","push","encodeURIComponent","join","then","response","catch","message","forEach","querySelectorAll","target","addEventListener","querySelector","getAttribute","replace","scrollIntoView","behavior","frame","prop","setAttribute","readyState","window"],"mappings":"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","file":"script.a2a23e63.js","sourceRoot":"../src","sourcesContent":["if (document.readyState === 'complete') {\n\tstart();\n} else {\n\twindow.addEventListener('DOMContentLoaded', start);\n}\n\nfunction start() {\n\tvar nodes = {\n\t\terror: document.createElement('p'),\n\t\tamend: document.createElement('p'),\n\t\twaiting: document.createElement('p'),\n\t\tsuccess: document.createElement('p'),\n\t\tcontactme: contactme\n\t};\n\tnodes.error.className = 'error';\n\tnodes.error.appendChild(document.createTextNode('Something went wrong, please try again.'));\n\tnodes.amend.className = 'error';\n\tnodes.amend.appendChild(document.createTextNode('Please fill out name and contact method.'));\n\tnodes.waiting.appendChild(document.createTextNode('Thank you'));\n\tnodes.success.appendChild(document.createTextNode('I will return to you shortly'));\n\n\tnodes.contactme.onsubmit = function(event) {\n\t\tevent.preventDefault();\n\n\t\tnodes.error.parentNode && nodes.error.parentNode.removeChild(nodes.error);\n\t\tnodes.amend.parentNode && nodes.amend.parentNode.removeChild(nodes.amend);\n\t\tnodes.contactme.parentNode.replaceChild(nodes.waiting, nodes.contactme);\n\n\t\tvar data = serialise(nodes.contactme);\n\n\t\tif (!data.name || !data.contact) {\n\t\t\tnodes.waiting.parentNode.replaceChild(nodes.contactme, nodes.waiting);\n\t\t\tnodes.contactme.parentNode.insertBefore(nodes.amend, nodes.contactme);\n\t\t\treturn;\n\t\t}\n\n\t\tdata.date = new Date().toUTCString();\n\n\t\tfetch(\n\t\t\t\tnodes.contactme.action + queryfy(data)\n\t\t).then(function (response) {\n\t\t\tnodes.waiting.parentNode.replaceChild(nodes.success, nodes.waiting);\n\t\t}).catch(function (error) {\n\t\t\t// TODO: Temporarily disabling error message (triggered by CORS)\n\t\t\t// Resolve by switching form provider\n\t\t\tnodes.waiting.parentNode.replaceChild(nodes.success, nodes.waiting);\n\t\t\t// nodes.waiting.parentNode.replaceChild(nodes.contactme, nodes.waiting);\n\t\t\t// nodes.contactme.parentNode.insertBefore(nodes.error, nodes.contactme);\n\t\t});\n\t}\n\n\tfunction serialise(form) {\n\t\treturn [].reduce.call(\n\t\t\tform,\n\t\t\tfunction(accumulator, item) {\n\t\t\t\tif (item.value) {\n\t\t\t\t\taccumulator[item.name] = item.value.trim();\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t},\n\t\t\t{}\n\t\t);\n\t}\n\n\tvar entries = {\n\t\tname: 'entry.1419581890',\n\t\tcontact: 'entry.367634920',\n\t\tmessage: 'entry.1892559927',\n\t\tdate: 'entry.1624056495',\n\t};\n\tfunction queryfy(data) {\n\t\treturn Object.keys(entries).reduce(\n\t\t\tfunction (accumulator, key) {\n\t\t\t\taccumulator.push(\n\t\t\t\t\t[entries[key], encodeURIComponent(data[key])].join('=')\n\t\t\t\t);\n\t\t\t\treturn accumulator;\n\t\t\t},\n\t\t\t[]\n\t\t).join('&');\n\t}\n\n\t[].forEach.call(\n\t\tdocument.querySelectorAll('a[href^=\"#\"]'),\n\t\tfunction (target) {\n\t\t\ttarget.addEventListener('click', function(event) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tvar destination = document.querySelector('[name=\"' + target.getAttribute('href').replace('#', '') + '\"]');\n\n\t\t\t\tdestination.scrollIntoView({behavior: 'smooth'});\n\t\t\t});\n\t\t}\n\t);\n\n\t// Load map\n\tconst frame = document.createElement('iframe');\n\t[\n\t\t[ 'title', 'My Office Location' ],\n\t\t[ 'width', '100%' ],\n\t\t[ 'height', '100%' ],\n\t\t[ 'src', 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2478.7957283073088!2d-0.1435368157730345!3d51.590307079648746!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761b3e977d91b5%3A0xf02ada7628d85293!2sDan%20I%20Silas%20Chartered%20Surveyor!5e0!3m2!1siw!2sil!4v1594805579242!5m2!1siw!2sil' ],\n\t\t[ 'frameborder', '0'] ,\n\t\t[ 'scrolling', 'no'] ,\n\t\t[ 'marginheight', '0'] ,\n\t\t[ 'marginwidth', '0']\n\t].forEach(\n\t\t([ prop, value ]) => frame.setAttribute(prop, value)\n\t);\n\tdocument.querySelector('footer').appendChild(frame);\n}\n"]}